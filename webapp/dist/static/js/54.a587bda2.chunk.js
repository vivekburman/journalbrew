(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{312:function(e,t,o){"use strict";var a=o(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(o(4)),n=(a(o(0)),a(o(427))),u=(0,l.default)("div",{className:"margin-main w-100"},void 0,(0,l.default)(n.default,{})),r=function(){return u};t.default=r},427:function(e,t,o){"use strict";var a=o(18),l=o(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(o(4)),u=l(o(81)),r=a(o(0)),d=o(19);o(428);var i=l(o(345)),s=l(o(346)),f=o(348),c=o(82),v=o(150),m=l(o(138)),w=o(363),p=o(364),I=o(140),g=l(o(333)),h=o(3),N=o(78),F=o(80),k=o(473),O=function(e){return(0,N.getDisplayName)(e.firstName,e.middleName,e.lastName)},L=(0,n.default)(m.default,{height:100}),x=(0,n.default)(m.default,{count:3}),E=(0,n.default)(m.default,{circle:!0,height:30,width:30}),S=(0,n.default)(m.default,{height:200}),U=(0,n.default)(m.default,{count:3}),T=(0,n.default)(g.default,{}),y=(0,n.default)("span",{className:"separator"},void 0,"\u2022"),D=(0,n.default)("hr",{}),W=(0,n.default)("span",{className:"written-by"},void 0,"Written By"),b=(0,d.connect)((function(e){return{currentUser:e.user.currentUser}}))((function(e){var t,o=(0,r.useState)(),a=(0,u.default)(o,2),l=a[0],d=a[1],m=(0,r.useState)(!0),g=(0,u.default)(m,2),N=g[0],b=g[1],P=(0,r.useState)(!1),C=(0,u.default)(P,2),B=C[0],A=C[1],j=(0,h.useParams)(),q=j.userId,z=j.postId,_=(0,r.useState)(F.TSNEnum.FOLLOW.UNSPECIFIED),M=(0,u.default)(_,2),H=M[0],J=M[1],R=(0,r.useState)(!1),G=(0,u.default)(R,2),K=G[0],Q=G[1],V=(0,r.useState)(),X=(0,u.default)(V,2),Y=X[0],Z=X[1],$=!!(null===(t=e.currentUser)||void 0===t?void 0:t.userId);(0,r.useEffect)((function(){(0,I.getFullPost)(z,q).then((function(e){var t=e.data;d(t),A(!1),$&&Q(t.isBookmarked)})).catch((function(e){d(),A(!0)})).finally((function(){b(!1)}))}),[]),(0,r.useEffect)((function(){var t,o;if($){if(!(null===(t=e.currentUser)||void 0===t?void 0:t.token)||!(null===(o=e.currentUser)||void 0===o?void 0:o.userId)||!(null===l||void 0===l?void 0:l.authorInfo))return Z(!1),void J(F.TSNEnum.FOLLOW.UNSPECIFIED);e.currentUser.userId===l.authorInfo.authorId?J(F.TSNEnum.FOLLOW.UNSPECIFIED):(0,k.getFollows)({followerId:e.currentUser.userId,followingId:l.authorInfo.authorId}).then((function(e){e.data.success?J(F.TSNEnum.FOLLOW.FOLLOWS):J(F.TSNEnum.FOLLOW.NOT_FOLLOWS)})).catch((function(){J(F.TSNEnum.FOLLOW.UNSPECIFIED)})).finally((function(){Z(!1)}))}}),[l]);var ee,te,oe,ae,le,ne=function(){var t,o;if((null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&(null===l||void 0===l||null===(o=l.authorInfo)||void 0===o?void 0:o.authorId)){var a=H;Z(!0),(0,k.requestFollow)({followerId:e.currentUser.userId,followingId:l.authorInfo.authorId}).then((function(e){e.data.success?J(F.TSNEnum.FOLLOW.FOLLOWS):J(a)})).catch((function(){J(a)})).finally((function(){Z(!1)}))}},ue=function(){var t,o;if((null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&(null===l||void 0===l||null===(o=l.authorInfo)||void 0===o?void 0:o.authorId)){var a=H;Z(!0),(0,k.requestUnFollow)({followerId:e.currentUser.userId,followingId:l.authorInfo.authorId}).then((function(e){e.data.success?J(F.TSNEnum.FOLLOW.NOT_FOLLOWS):J(a)})).catch((function(){J(a)})).finally((function(){Z(!1)}))}},re=function(){K?ie():de()},de=function(){var t;(null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&z&&(0,k.setBookmark)({userID:e.currentUser.userId,postID:z}).then((function(e){e.data.success&&Q(!0)}))},ie=function(){var t;(null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&z&&(0,k.unsetBookmark)({userID:e.currentUser.userId,postID:z}).then((function(e){e.data.success&&Q(!1)}))};return r.default.createElement(r.default.Fragment,null,N?(0,n.default)("div",{className:"flex-row-nowrap full-post-container justify-content-evenly"},void 0,(0,n.default)("div",{className:"flex-column-nowrap flex-grow-2 full-news"},void 0,(0,n.default)("div",{},void 0,L,(0,n.default)("section",{style:{margin:"30px 0",lineHeight:1.5}},void 0,x),E,(0,n.default)("div",{style:{margin:"30px 0",lineHeight:1.5}},void 0,S,U)))):B?T:(0,n.default)("div",{className:"flex-row-nowrap full-post-container"},void 0,(0,n.default)("div",{className:"flex-column-nowrap flex-grow-2 full-news"},void 0,(0,n.default)("div",{},void 0,(0,n.default)("h1",{className:"news-heading"},void 0,(0,f.parseHTMLToReact)(l.metaInfo.title)),(0,n.default)("div",{},void 0,(0,n.default)("div",{className:"full-story-profile-wrapper justify-content-between"},void 0,(0,n.default)("div",{className:"flex flex-row-nowrap align-items-center"},void 0,(0,n.default)(c.UserAvatar,{size:50,url:l.authorInfo.profilePicUrl,userName:O(l.authorInfo)}),(0,n.default)("div",{className:"flex flex-column-nowrap padding-8"},void 0,(0,n.default)("div",{className:"flex flex-row-nowrap align-items-center"},void 0,(0,n.default)("span",{className:"username"},void 0,O(l.authorInfo)),H===F.TSNEnum.FOLLOW.UNSPECIFIED?r.default.createElement(r.default.Fragment,null):H===F.TSNEnum.FOLLOW.FOLLOWS?(0,n.default)("span",{className:"following "+(Y?"tsn-loading":""),onClick:ue},void 0,"Following"):(0,n.default)("span",{className:"follow "+(Y?"tsn-loading":""),onClick:ne},void 0,"Follow")),(0,n.default)("div",{className:"flex flex-row align-items-center"},void 0,(0,n.default)("span",{className:"news-location"},void 0,l.metaInfo.location),y,(0,n.default)("span",{className:"news-time-of-post"},void 0,(ae=l.metaInfo.createdAt,le=new Date(ae),"".concat(w.months[le.getMonth()]," ").concat(le.getDate())))))),(0,n.default)("div",{className:"full-story-top-items-wrapper flex flex-column-nowrap"},void 0,(0,n.default)("div",{className:"flex flex-row-nowrap social-share-wrapper"},void 0,$?r.default.createElement(r.default.Fragment,null,(0,n.default)("img",{src:K?s.default:i.default,alt:"bookmark",className:"icon-img padding-left-0",onClick:re})):r.default.createElement(r.default.Fragment,null))))),(0,n.default)("section",{},void 0,(ee=l.postInfo.fullStory,te=ee.blocks,oe=void 0===te?[]:te,r.default.createElement(r.default.Fragment,null,(0,p.renderTemplate)(oe)))),D),(0,n.default)("div",{className:"margin-top-10 flex-row-wrap tags-wrapper"},void 0,(0,n.default)(v.Tags,{tags:l.metaInfo.tags})),(0,n.default)("div",{},void 0,(0,n.default)("div",{className:"full-story-profile-wrapper-bottom justify-content-between margin-top-10"},void 0,(0,n.default)("div",{className:"full-story-profile-wrapper justify-content-between w-100"},void 0,(0,n.default)("div",{className:"flex flex-row-nowrap justify-content-between align-items-center"},void 0,(0,n.default)("div",{className:"flex flex-row-nowrap padding-top-8"},void 0,(0,n.default)(c.UserAvatar,{size:50,url:l.authorInfo.profilePicUrl,userName:O(l.authorInfo)}),(0,n.default)("div",{className:"flex flex-column-nowrap margin-left-8"},void 0,W,(0,n.default)("span",{className:"username"},void 0,O(l.authorInfo)))),H===F.TSNEnum.FOLLOW.UNSPECIFIED?r.default.createElement(r.default.Fragment,null):H===F.TSNEnum.FOLLOW.FOLLOWS?(0,n.default)("span",{className:"following "+(Y?"tsn-loading":""),onClick:ue},void 0,"Following"):(0,n.default)("span",{className:"follow "+(Y?"tsn-loading":""),onClick:ne},void 0,"Follow")),(0,n.default)("div",{className:"flex flex-row-nowrap social-share-bottom-wrapper padding-top-8"},void 0,$?r.default.createElement(r.default.Fragment,null,(0,n.default)("img",{src:K?s.default:i.default,alt:"bookmark",className:"icon-img padding-left-0",onClick:re})):r.default.createElement(r.default.Fragment,null))))))))}));t.default=b},428:function(e,t,o){},473:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBookmarked=t.setBookmark=t.unsetBookmark=t.requestUnFollow=t.requestFollow=t.getFollows=void 0;var a=o(51),l=o(85);t.getFollows=function(e){var t=e.followerId,o=e.followingId;return(0,a.axiosPost)("api/user-info/following",{followerId:t,followingId:o},{headers:{Authorization:(0,l.getToken)()}})};t.requestFollow=function(e){var t=e.followerId,o=e.followingId;return(0,a.axiosPut)("api/user-info/follow-request",{followerId:t,followingId:o},{headers:{Authorization:(0,l.getToken)()}})};t.requestUnFollow=function(e){var t=e.followerId,o=e.followingId;return(0,a.axiosDelete)("api/user-info/unfollow-request",{data:{followerId:t,followingId:o},headers:{Authorization:(0,l.getToken)()}})};t.isBookmarked=function(e){var t=e.userID,o=e.postID;return(0,a.axiosPost)("api/user-info/bookmarked",{userId:t,postId:o},{headers:{Authorization:(0,l.getToken)()}})};t.setBookmark=function(e){var t=e.userID,o=e.postID;return(0,a.axiosPut)("api/user-info/add-bookmark",{userId:t,postId:o},{headers:{Authorization:(0,l.getToken)()}})};t.unsetBookmark=function(e){var t=e.userID,o=e.postID;return(0,a.axiosDelete)("api/user-info/delete-bookmark",{data:{userId:t,postId:o},headers:{Authorization:(0,l.getToken)()}})}}}]);