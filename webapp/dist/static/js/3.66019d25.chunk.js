(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{321:function(e,t,r){"use strict";var n=r(18),a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(30)),i=a(r(139)),s=a(r(31)),l=a(r(4)),u=a(r(37)),d=a(r(38)),f=a(r(42)),c=a(r(39)),p=a(r(40)),m=a(r(41)),g=a(r(17)),h=n(r(0));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,g.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}r(398);var b=function(e){(0,c.default)(n,e);var t,r=S(n);function n(e){var t;return(0,u.default)(this,n),t=r.call(this,e),(0,g.default)((0,f.default)(t),"shouldAddInlineLoader",(function(){return t.state.loading&&0!=t.state.data.length})),(0,g.default)((0,f.default)(t),"renderList",(function(){for(var e=[],r=t.state.data,n=0;n<r.length;n++)r[n]&&e.push(h.default.createElement("div",{key:r[n][t.props.uniqueId],id:0===n?t.SCROLL_MODES.TOP:n===r.length-1?t.SCROLL_MODES.BOTTOM:"",className:"list-item-wrapper position-absolute visible-hidden w-100","data-item-id":r[n][t.props.uniqueId],ref:t.getReference(n)},t.props.getListItemDOM(r[n],n,t.removeItem)));if(t.shouldAddInlineLoader()){var a=(0,l.default)("div",{id:"loader",className:"list-item-wrapper"},"loading",t.props.getLoadingUI());t.currentScrollMode===t.SCROLL_MODES.BOTTOM?e.push(a):e.unshift(a)}return e})),(0,g.default)((0,f.default)(t),"positionElementsBottom",(function(e){var r=0;return e.forEach((function(e,n,a){if(t.sliderSize-t.elementsSwapped<=n){var o=t.getPosition(a,n),i=o.selfHeight,s=o.offset;e.style.transform="translateY(".concat(s,"px)"),r=i+s,e.classList.remove("visible-hidden")}})),r})),(0,g.default)((0,f.default)(t),"positionElementsTop",(function(e){for(var r=e.length-1;r>=0;){if(t.elementsSwapped>r){var n=e[r],a=t.getPosition(e,r).offset;n.style.transform="translateY(".concat(a,"px)"),n.classList.remove("visible-hidden")}r--}})),(0,g.default)((0,f.default)(t),"shiftElements",(function(e){var r=t.removedItemInfo,n=r.reducedHeight,a=r.index;t.removedItemInfo=null;var o=0;return e.forEach((function(r,i){var s=t.getTransformY(r)-n;i>=a&&(r.style.transform="translateY(".concat(s,"px)"),r.classList.remove("visible-hidden")),i===e.length-1&&(o=s+r.offsetHeight)})),o})),(0,g.default)((0,f.default)(t),"positionElements",(function(){if(t.rootRef.current){var e=t.rootRef.current,r=t.currentScrollMode;requestAnimationFrame((function(){var n=Array.from(e.children);if(r===t.SCROLL_MODES.BOTTOM){var a=t.positionElementsBottom(n);0!=a&&(e.style.height=a+"px")}else if(r===t.SCROLL_MODES.TOP)t.positionElementsTop(n);else{var o=t.shiftElements(n);e.style.height=o+"px"}t.attachObserver()}))}})),(0,g.default)((0,f.default)(t),"setWrapperOffset",(function(){t.wrapperOffset=t.rootRef.current?t.rootRef.current.getBoundingClientRect().top:0})),(0,g.default)((0,f.default)(t),"getPosition",(function(e,r){var n={selfHeight:e[r].getBoundingClientRect().height,offset:0},a=t.SCROLL_MODES.BOTTOM===t.currentScrollMode;if(a&&r<1)return n;var o=a?r-1:r+1,i=e[o].style.transform;return i&&i.length?(n.offset=+i.split("(")[1].trim().slice(0,-3)+(a?e[o].getBoundingClientRect().height:-e[r].getBoundingClientRect().height),n):n})),(0,g.default)((0,f.default)(t),"getTransformY",(function(e){var t=e.style.transform;return t&&t.length?+t.split("(")[1].trim().slice(0,-3):0})),(0,g.default)((0,f.default)(t),"initiateObserver",(function(){t.observer=new IntersectionObserver(t.callback,{root:null,rootMargin:"0px",threshold:0})})),(0,g.default)((0,f.default)(t),"attachObserver",(function(){t.topRef.current&&t.observer.observe(t.topRef.current),t.bottomRef.current&&t.observer.observe(t.bottomRef.current)})),(0,g.default)((0,f.default)(t),"getTopNextElements",function(){var e=(0,s.default)(o.default.mark((function e(r){var n,a,s,l,u,d,f,c,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.boundary.start){e.next=2;break}return e.abrupt("return");case 2:return t.elementsSwapped=1,t.setCurrentScrollMode(t.SCROLL_MODES.TOP),t.setState({loading:!0}),r-=1,n=t.props.dataIndex,a=t.state.data,s=a[0][n],l=Math.max(0,s-r-(t.sliderSize-a.length)),e.prev=10,e.next=13,t.props.getRangeData(l,s);case 13:u=e.sent,0===(d=u.data).length?(t.setState({loading:!1}),t.elementsSwapped=0):(0===d[0][n]&&(r=d.length),d=[].concat((0,i.default)(d),(0,i.default)(t.state.data.slice(0,a.length-r))),f=t.getStartEnd(d),c=f.start,p=f.end,t.isUpdateNeeded(c,p)&&(t.elementsSwapped=r+(t.sliderSize-a.length),t.sliderSize=t.props.sliderSize,t.updateState(c,p,d))),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),t.setState({loading:!1}),t.elementsSwapped=0;case 22:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()),(0,g.default)((0,f.default)(t),"getOutOfViewportElementsTop",(function(){if(t.rootRef.current){var e=0,r=document.scrollingElement.scrollTop-t.rootRef.current.clientTop+window.innerHeight-t.wrapperOffset,n=Array.from(t.rootRef.current.children);for(e=n.length-1;e>=0&&!(r>=t.getTransformY(n[e]));e--);e>0&&t.getTopNextElements(n.length-e)}})),(0,g.default)((0,f.default)(t),"getBottomNextElements",function(){var e=(0,s.default)(o.default.mark((function e(r){var n,a,s,l,u,d,f,c,p,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setCurrentScrollMode(t.SCROLL_MODES.BOTTOM),t.elementsSwapped=0,t.setState({loading:!0}),n=t.props.dataIndex,a=t.state.data,r-=1,s=a[a.length-1][n]+1,l=s+r+(t.sliderSize-a.length),e.next=10,t.props.getRangeData(s,l);case 10:u=e.sent,d=u.data,f=u.isLast,0===d.length?(t.setState({loading:!1}),t.elementsSwapped=0):(f&&(r=d.length),d=[].concat((0,i.default)(t.state.data.slice(r)),(0,i.default)(d)),c=t.getStartEnd(d),p=c.start,m=c.end,t.isUpdateNeeded(p,m)&&(t.elementsSwapped=r+(t.sliderSize-a.length),t.sliderSize=t.props.sliderSize,t.updateState(p,m,d)));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,g.default)((0,f.default)(t),"getStartEnd",(function(e){return{start:e[0][t.props.dataIndex],end:e[e.length-1][t.props.dataIndex]+1}})),(0,g.default)((0,f.default)(t),"getOutOfViewportElementsBottom",(function(){if(t.rootRef.current){var e=0,r=document.scrollingElement.scrollTop-t.wrapperOffset,n=Array.from(t.rootRef.current.children);for(e=0;e<n.length&&!(r<=t.getTransformY(n[e])+n[e].getBoundingClientRect().height);e++);e>0&&t.getBottomNextElements(e)}})),(0,g.default)((0,f.default)(t),"getOutOfViewportElements",(function(e){e===t.SCROLL_MODES.TOP?t.getOutOfViewportElementsTop(e):e===t.SCROLL_MODES.BOTTOM&&t.getOutOfViewportElementsBottom(e)})),(0,g.default)((0,f.default)(t),"isUpdateNeeded",(function(e,r){return!(e<0||e>r||r<e||e===t.boundary.start&&r===t.boundary.end)})),(0,g.default)((0,f.default)(t),"setCurrentScrollMode",(function(e){return t.currentScrollMode=e})),(0,g.default)((0,f.default)(t),"resetCurrentScrollMode",(function(){return t.currentScrollMode=null})),(0,g.default)((0,f.default)(t),"updateState",(function(e,r,n){t.resetObservation(),t.boundary={start:e,end:r},t.setState({data:n,loading:!1})})),(0,g.default)((0,f.default)(t),"callback",(function(e,r){e.forEach((function(e){e.isIntersecting&&e.target.id===t.SCROLL_MODES.BOTTOM&&t.getOutOfViewportElements(t.SCROLL_MODES.BOTTOM),e.isIntersecting&&e.target.id===t.SCROLL_MODES.TOP&&t.getOutOfViewportElements(t.SCROLL_MODES.TOP)}))})),(0,g.default)((0,f.default)(t),"resetObservation",(function(){t.observer.unobserve(t.bottomRef.current),t.observer.unobserve(t.topRef.current),t.bottomRef=(0,h.createRef)(),t.topRef=(0,h.createRef)()})),(0,g.default)((0,f.default)(t),"getReference",(function(e){return 0===e?t.topRef:e===t.state.data.length-1?t.bottomRef:void 0})),(0,g.default)((0,f.default)(t),"setDynamicDataToState",(function(e,r){t.setState({data:e,loading:!1,isLast:r,addNewHeight:!0,isEmpty:0==e.length})})),t.topRef=(0,h.createRef)(),t.bottomRef=(0,h.createRef)(),t.rootRef=(0,h.createRef)(),t.wrapperOffset=null,t.sliderSize=t.props.sliderSize||15,t.boundary={start:0,end:t.sliderSize},t.state={data:[],loading:!0,isEmpty:!1},t.SCROLL_MODES={TOP:"top",BOTTOM:"bottom"},t.observer=null,t.currentScrollMode=t.SCROLL_MODES.BOTTOM,t.elementsSwapped=t.sliderSize,t.removedItemInfo=null,t.removeItem=t.removeItem.bind((0,f.default)(t)),t}return(0,d.default)(n,[{key:"componentDidMount",value:(t=(0,s.default)(o.default.mark((function e(){var t,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.getRangeData(this.boundary.start,this.boundary.end);case 3:t=e.sent,r=t.data,n=t.isLast,this.setDynamicDataToState(r,n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.setState({data:[],loading:!1,isEmpty:!0});case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(){this.positionElements(),this.observer||(this.initiateObserver(),this.setWrapperOffset())}},{key:"removeItem",value:function(e){var t=this.state.data,r=this.props.dataIndex,n=t.findIndex((function(t){return t.id===e}));if(-1!=n){this.resetCurrentScrollMode(),this.elementsSwapped=0,this.removedItemInfo={reducedHeight:Array.from(this.rootRef.current.children).find((function(t){return+t.dataset.itemId===e})).offsetHeight,index:n};var a=t.splice(n,1)[0],o=t.map((function(e){return v(v({},e),{},(0,g.default)({totalCount:e.totalCount-1},r,a[r]<e[r]?e[r]-1:e[r]))})),i=this.getStartEnd(o),s=i.start,l=i.end;this.updateState(s,l,o)}}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.loading,n=e.isEmpty;return(0,l.default)("div",{className:"infinte-scroll-wrapper"},void 0,0===t.length&&r?this.props.getLoadingUI():n?(0,l.default)("div",{className:"empty-state-wrapper flex-row-wrap justify-content-center"},void 0,this.props.emptyStateUI()):h.default.createElement("div",{className:"position-relative",ref:this.rootRef},this.renderList()))}}]),n}(h.Component);t.default=b},398:function(e,t,r){}}]);